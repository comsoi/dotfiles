## .init_profile

export EDITOR='nvim'
export LESS="-R"

append_env() {
	[[ -z "$1" || -z "$2" || ! -d "$2" ]] && return
	local v=$(eval echo \$$1)
	[[ ":$v:" == *":$2:"* ]] && return
	if [[ "$3" == "prefix" ]]; then
		eval $1=\"$2${v:+:$v}\"
	else
		eval $1=\"${v:+$v:}$2\"
	fi
}

append_env PATH "$HOME/.local/bin" prefix

# OS
{
	unameOut=$(uname -a)
	case "${unameOut}" in
	*Microsoft*)    OS="WSL1" ;; #wls must be first since it will have Linux in the name too
	*microsoft*)    OS="WSL2" ;;
	Linux*)         OS="Linux" ;;
	Darwin*)        OS="Mac" ;;
	CYGWIN*)        OS="Cygwin" ;;
	MINGW*)         OS="Windows" ;;
	*Msys)          OS="Windows" ;;
	*)              OS="UNKNOWN:${unameOut}" ;;
	esac

	if [[ ${OS} == "Mac" ]] && sysctl -n machdep.cpu.brand_string | grep -q 'Apple M'; then
		OS="MacArm"
	fi
	unset unameOut
	export OS
}

if [[ -r "${HOME}/.init_custom" ]]; then
	source ${HOME}/.init_custom
fi
